var sys = require('sys'), fs = require('fs');

var jsmeter = require('./jsmeter');

var fileName = process.argv[2];
var functions = jsmeter.run(fs.readFileSync(fileName).toString(), fileName);

var ok = true;
for (var i=0; i < functions.length; i++) {
    var f = functions[i];
    if (f.complexity > 10) {
        ok = false;
        sys.puts("FAIL: "+f.name+" has complexity "+f.complexity);
    }
}
//sys.puts(JSON.stringify(functions))